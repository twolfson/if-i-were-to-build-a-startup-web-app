# UI <> Server Interface Analysis
**Winner: HTML forms, limited AJAX**

**Runner-up: Even split between "HTML forms, no AJAX" and "No HTML forms, AJAX only"**

Explanations in comparison below

## Description
A web app inherently has a client (aka browser aka UI) and server split. There is data passed from one to another, and the choice of how we should present that as an interface.

There's various framings like [fat client and thin client](https://www.parallels.com/tips/thin-clients/vs-thick/), but I think this removes focus from the development experience and overweights severity to user experience (UX)

TODO: Add links to table

## Comparison
|                            Name                            | Non-trivial previous experience? |                                                            Description                                                             |                                                                                                                                                                                                                                                                                                                                                                                                                           Notes                                                                                                                                                                                                                                                                                                                                                                                                                           |
|------------------------------------------------------------|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| HTML forms, no AJAX                                        | ✔️ (25-50% of career)            | Operate with browser built-in form submission, e.g. `<form>` and `<input>`                                                         | [MDN article][MDN forms]. Works quite well and has good associated UX (progress shown in address bar). Extension for improved UX (e.g. loading spinners)<br/><br/>Major strength is no need to track DB state from browser locally as well as easy to build + maintain functionality like links that perform logic and redirects as needed<br/><br/>Major downside reduced code reuse for [Single-Page Applications (SPA)][MDN SPA], but in my experience these are quite rare and not the primary purpose of a web app                                                                                                                                                                                                                                                                                                                                   |
| **HTML forms, limited AJAX (winner)**                      | ✔️ (10% of career)               | Use `<form>` and such majority of time, but exit in occasional scenarios like secondary form actions (e.g. notification dismissal) | Same as "HTML forms, no AJAX" but a little more lenient. e.g. We don't want UX to suffer for things like dismissing notifications, so support those as a one-off<br/><br/>This was frustrating to deal with in early web days with jQuery due to page specific focus, but I think as long as widget-focused approach is used (e.g. [Bootstrap][], ["islands" architecture][]), then it should generally be maintainable and great UX<br/><br/>Sometimes people might get thrown for things like "How do I build an interactive map around with this?"<br/>In that scenario, I'd make that specific page React-based and build the UI around it, but the React would update HTML form content and the submission would happen without obscuring it.<br/>Or maybe the page is well-contained to self-contain AJAX, as long as it's to 1-2 endpoints at most |
| HTML forms with server-driven HTML updates (e.g. [HTMX][]) | ✔️ (10% of career)               | Swap content from an HTTP response with a declared target                                                                          | I rolled our own setup for this in 2013 for https://riders.uber.com/ and deeply regret it.<br/>It was a good idea on paper (had buy-in from others), but in practice it made for awful UX (e.g. no good loading spinners) and content swaps felt unexpected.<br/>Additionally, the actual code seemed fragmented/confusing because updates were split across 2 places (server saying what to update to, browser saying how to swap).<br/>I strongly advise against this approach                                                                                                                                                                                                                                                                                                                                                                          |
| HTML forms pre-login, AJAX only forms/content after login  |                                  | Leverage Django built-in support for auth pages and cookie sessions to start, but then lean into AJAX only afterwards              | Seems like it'd provide a good UX, but I believe it'd destroy developer experience (DX) by needing to remember 1 set of rules for some pages, and a different set for another.<br/>Not to mention double tooling for things like linting (e.g. HTML errors) as well as reduced code reusability.<br/>Additionally, you still run into the drawbacks of "No HTML forms, AJAX only" like cache management                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
| No HTML forms, AJAX only                                   | ✔️ (20% of career)               | Control everything through a SPA, from authentication to page navigation                                                           | Works fantastic for things like UI management and dynamically shifting through pages (UX), but extremely frustrating when it comes to DB state tracking (DX).<br/>i.e. For this to work, the SPA needs to effectively have a copy of the API responses, and know when 1 save requires breaking the cache of other existing responses.<br/>This leads to a lot of busy work with little value, that could have been avoided with another architecture.<br/>Additionally, you probably lose a lot of freebies we got from the web framework selection (e.g. rebuilding login + sign up + forgot password + sessions)                                                                                                                                                                                                                                        |

[MDN forms]: https://developer.mozilla.org/en-US/docs/Learn/Forms/Your_first_form
[MDN SPA]: https://developer.mozilla.org/en-US/docs/Glossary/SPA
[Bootstrap]: https://getbootstrap.com/
["islands" architecture]: https://www.patterns.dev/posts/islands-architecture
[HTMX]: https://htmx.org/
